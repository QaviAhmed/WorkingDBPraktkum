<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details</title>
    <style>
        .order {
            border: 1px solid #ddd;
            margin-bottom: 20px;
            padding: 10px;
        }
        .order-detail {
            margin-left: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Order Details</h1>
    <div id="order-container"></div>

    <script>
        // Fetch the Order data from the backend
        fetch('/order')
            .then(response => response.json())
            .then(data => {
                console.log(data); // Log the data to verify it's being received correctly
                const orderContainer = document.getElementById('order-container');
                
                // Check if the data is wrapped in an 'order_data' property
                const orderData = data.order_data || data;
                
                // Create HTML for each order
                orderData.forEach(order => {
                    const orderDiv = document.createElement('div');
                    orderDiv.classList.add('order');

                    let orderHtml = `<h2>Order ID: ${order.order_ID}</h2>`;
                    orderHtml += `
                        <div class="order-detail">
                            <p><strong>Status:</strong> ${order.status}</p>
                            <p><strong>Date:</strong> ${order.date}</p>
                            <p><strong>Price:</strong> $${order.price.toFixed(2)}</p>
                            <p><strong>User ID:</strong> ${order.user_ID}</p>
                            <p><strong>Transaction ID:</strong> ${order.transaction_ID}</p>
                        </div>
                    `;

                    orderDiv.innerHTML = orderHtml;
                    orderContainer.appendChild(orderDiv);
                });
            })
            .catch(error => console.error('Error fetching Order data:', error));
    </script>
</body>
</html>